<div class="board-games-individual-container" [class.dark-mode]="isDarkMode">
  <div class="header-section">
    <h1>Board Games (Game View)</h1>
    <div class="header-buttons">
      <button type="button" class="filter-button" (click)="openFilterModal()">
        Filter
      </button>
      <button type="button" class="refresh-button" (click)="swapView()" [disabled]="isLoading">
        {{isLoading ? 'Loading...' : 'Swap View'}}
      </button>
    </div>
  </div>

  <div class="content-section">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-message">
      <p>Loading board games...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="error-message">
      <p>{{errorMessage}}</p>
    </div>

    <!-- Board Games List -->
    <div *ngIf="!isLoading && !errorMessage" class="board-games-list">
      <!-- Filter Status -->
      <div *ngIf="filterService.hasActiveFilters('boardGame')" class="filter-status">
        <div class="filter-info">
          <span class="filter-label">Filtered by:</span>
          <span class="filter-value">{{getActiveFilterDisplayText()}}</span>
          <button type="button" class="clear-filter-button" (click)="clearFilters()">
            Clear Filter
          </button>
        </div>
      </div>
      
      <div *ngIf="boardGames.length === 0" class="no-games-message">
        <p>No board games found.</p>
      </div>
      
      <div *ngIf="boardGames.length > 0" class="table-container">
        <div class="table-header">
          <span class="item-count">{{boardGamesCount}} {{boardGamesCount === 1 ? 'Board Game' : 'Board Games'}}</span>
        </div>
        <table class="board-games-table">
          <thead>
            <tr>
              <th>Title</th>
              <th *ngFor="let fieldName of customFieldNames" class="custom-field-header">{{fieldName}}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let game of boardGames" class="table-row" (click)="navigateToDetail(game.id)">
              <td class="game-title">{{game.title}}</td>
              <td *ngFor="let fieldName of customFieldNames" class="custom-field-value">
                <app-boolean-display 
                  *ngIf="isCustomFieldBoolean(fieldName); else textValue"
                  [value]="getCustomFieldValue(game, fieldName)"
                  size="small">
                </app-boolean-display>
                <ng-template #textValue>
                  {{getCustomFieldValue(game, fieldName)}}
                </ng-template>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Detail Board Game Modal -->
  <div *ngIf="showDetailBoardGameModal" class="modal-overlay" (click)="closeDetailBoardGameModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{selectedBoardGame?.title}} Details</h2>
        <div class="modal-header-actions">
          <button type="button" class="close-button" (click)="closeDetailBoardGameModal()">Ã—</button>
        </div>
      </div>
      
      <div class="modal-body" *ngIf="selectedBoardGame">
        <!-- Custom Fields -->
        <div class="custom-fields-inline" *ngIf="selectedBoardGame.customFieldValues.length > 0">
          <div class="detail-grid">
            <div class="detail-item" *ngFor="let field of selectedBoardGame.customFieldValues">
              <label>{{field.customFieldName}}:</label>
              <app-boolean-display 
                *ngIf="field.customFieldType === 'boolean'; else textValue"
                [value]="field.value"
                size="small">
              </app-boolean-display>
              <ng-template #textValue>
                <span>{{field.value}}</span>
              </ng-template>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Entity Filter Modal -->
  <app-entity-filter-modal
    entityType="boardGame"
    [(show)]="showFilterModal"
    (filtersApplied)="onFiltersApplied($event)">
  </app-entity-filter-modal>
</div>
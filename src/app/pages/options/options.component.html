<div class="options-container" [class.dark-mode]="isDarkMode">
  <div class="ui-settings-section">
    <h2>UI Settings</h2>
    <div class="settings-group">
      <div class="toggle-container">
        <label for="darkModeToggle" class="toggle-label">Dark Mode</label>
        <input 
          type="checkbox" 
          id="darkModeToggle"
          [checked]="isDarkMode"
          (change)="onDarkModeToggle($any($event.target).checked)"
          class="toggle-input">
      </div>
      <div class="toggle-container">
        <label for="massInputModeToggle" class="toggle-label">Mass Input Mode</label>
        <input 
          type="checkbox" 
          id="massInputModeToggle"
          [checked]="isMassInputMode"
          (change)="onMassInputModeToggle($any($event.target).checked)"
          class="toggle-input">
      </div>
      <div class="toggle-container">
        <label for="massEditModeToggle" class="toggle-label">Mass Edit Mode</label>
        <input 
          type="checkbox" 
          id="massEditModeToggle"
          [checked]="isMassEditMode"
          (change)="onMassEditModeToggle($any($event.target).checked)"
          class="toggle-input">
      </div>
    </div>
  </div>

  <div class="default-sort-section">
    <h2>Default Sort Filters</h2>
    <p class="section-description">Set default sort filters for each entity type. These will be applied when no sort filter is specified in searches.</p>
    
    <div class="entity-cards">
      <div 
        *ngFor="let entity of entityTypes" 
        class="entity-card"
        (click)="editDefaultSort(entity.key)">
        <div class="entity-header">
          <h3>{{entity.label}}</h3>
          <button 
            *ngIf="getDefaultSort(entity.key)"
            type="button" 
            class="remove-button"
            (click)="removeDefaultSort(entity.key); $event.stopPropagation()">
            Ã—
          </button>
        </div>
        
        <div class="current-sort" *ngIf="getDefaultSort(entity.key); else noSort">
          <span class="sort-info">
            <strong>Field:</strong> {{formatFieldName(getDefaultSort(entity.key)!.field)}}
          </span>
          <span class="sort-info">
            <strong>Direction:</strong> {{getDefaultSort(entity.key)!.operand}}
          </span>
        </div>
        
        <ng-template #noSort>
          <div class="no-sort">No default sort set</div>
        </ng-template>
      </div>
    </div>
  </div>

  <div class="api-section">
    <h2>API Tools</h2>
    <div class="button-group">
      <div class="button-container">
        <button 
          type="button" 
          class="api-button" 
          (click)="checkHeartbeat()" 
          [disabled]="isChecking">
          {{isChecking ? 'Checking...' : 'API Heartbeat Check'}}
        </button>
      </div>
    </div>
  </div>

  <div class="api-section">
    <h2>Backup/Import</h2>
    <div class="button-group">
      <div class="button-container">
        <button 
          type="button" 
          class="api-button backup-button" 
          (click)="backupData()" 
          [disabled]="isBackingUp">
          {{isBackingUp ? 'Backing up...' : 'Backup Data'}}
        </button>
      </div>
      
      <div class="button-container">
        <input 
          type="file" 
          #fileInput 
          (change)="onFileSelected($event)" 
          accept=".txt,.json"
          style="display: none;">
        <button 
          type="button" 
          class="api-button import-button" 
          (click)="fileInput.click()" 
          [disabled]="isImporting">
          {{isImporting ? 'Importing...' : 'Import From File'}}
        </button>
      </div>

      <div class="button-container">
        <button 
          type="button" 
          class="api-button import-backup-button" 
          (click)="importFromBackup()" 
          [disabled]="isImportingFromBackup">
          {{isImportingFromBackup ? 'Importing...' : 'Import From Backup'}}
        </button>
      </div>

      <div class="button-container">
        <button 
          type="button" 
          class="api-button seed-button" 
          (click)="seedSampleData()" 
          [disabled]="isSeeding">
          {{isSeeding ? 'Seeding...' : 'Seed Sample Data'}}
        </button>
      </div>
    </div>
  </div>
</div>

<app-default-sort-modal
  [show]="showDefaultSortModal"
  [entityType]="editingEntityType"
  (showChange)="onDefaultSortModalClose()"
  (sortSaved)="onDefaultSortModalClose()">
</app-default-sort-modal>
